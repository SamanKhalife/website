---
title: "خارجی سازی پیکربندی با استفاده از MicroProfile، ConfigMaps و Secrets"
content_type: tutorial
weight: 10
---

<!-- overview -->

در این آموزش، شما یاد خواهید گرفت که چگونه و چرا باید پیکربندی میکروسرویس خود را خارجی سازی کنید.
به طور خاص، یاد خواهید گرفت که چگونه از ConfigMaps و Secrets در Kubernetes برای تنظیم متغیرهای محیطی استفاده کرده و سپس از آنها با استفاده از MicroProfile Config استفاده کنید.

## {{% heading "prerequisites" %}}

### ایجاد ConfigMaps و Secrets در Kubernetes

راه‌های مختلفی برای تنظیم متغیرهای محیطی برای یک کانتینر Docker در Kubernetes وجود دارد، از جمله: Dockerfile، kubernetes.yml، ConfigMaps در Kubernetes و Secrets در Kubernetes. در این آموزش، شما یاد خواهید گرفت که چگونه از دو مورد آخر برای تنظیم متغیرهای محیطی خود استفاده کنید که مقادیر آنها به میکروسرویس‌های شما تزریق خواهد شد. یکی از مزایای استفاده از ConfigMaps و Secrets این است که می‌توانند در کانتینرهای متعدد استفاده مجدد شوند، از جمله اختصاص به متغیرهای محیطی مختلف برای کانتینرهای مختلف.

ConfigMaps اشیاء API هستند که جفت‌های کلید-مقدار غیرمحرمانه را ذخیره می‌کنند. در آموزش تعاملی، یاد خواهید گرفت که چگونه از یک ConfigMap برای ذخیره نام برنامه استفاده کنید. برای اطلاعات بیشتر در مورد ConfigMaps، می‌توانید مستندات را [اینجا](/docs/tasks/configure-pod-container/configure-pod-configmap/) پیدا کنید.

اگرچه Secrets نیز برای ذخیره جفت‌های کلید-مقدار استفاده می‌شوند، اما از ConfigMaps متفاوت هستند به این دلیل که برای اطلاعات محرمانه و حساس در نظر گرفته شده‌اند و با استفاده از کدگذاری Base64 ذخیره می‌شوند. این امر باعث می‌شود که secrets گزینه مناسبی برای ذخیره مواردی مانند اطلاعات ورود، کلیدها و توکن‌ها باشد، که در آموزش تعاملی این کار را انجام خواهید داد. برای اطلاعات بیشتر در مورد Secrets، می‌توانید مستندات را [اینجا](/docs/concepts/configuration/secret/) پیدا کنید.

### خارجی سازی پیکربندی از کد

پیکربندی خارجی شده برنامه مفید است زیرا پیکربندی معمولاً بسته به محیط شما تغییر می‌کند. برای انجام این کار، از Contexts و Dependency Injection (CDI) در جاوا و MicroProfile Config استفاده خواهیم کرد. MicroProfile Config یکی از ویژگی‌های MicroProfile است، مجموعه‌ای از فناوری‌های باز جاوا برای توسعه و استقرار میکروسرویس‌های بومی ابر.

CDI قابلیت تزریق وابستگی استانداردی را فراهم می‌کند که به برنامه اجازه می‌دهد از اجزاء کم‌تر وابسته و همکار تشکیل شود. MicroProfile Config به برنامه‌ها و میکروسرویس‌ها روشی استاندارد برای دریافت ویژگی‌های پیکربندی از منابع مختلف، از جمله برنامه، زمان اجرا و محیط، ارائه می‌دهد. براساس اولویت تعریف شده منبع، ویژگی‌ها به‌طور خودکار در یک مجموعه از ویژگی‌ها که برنامه می‌تواند از طریق API دسترسی داشته باشد، ترکیب می‌شوند. با هم، CDI و MicroProfile در آموزش تعاملی برای بازیابی ویژگی‌های ارائه شده خارجی از ConfigMaps و Secrets در Kubernetes و تزریق آنها به کد برنامه شما استفاده خواهند شد.

بسیاری از فریم‌ورک‌ها و زمان‌های اجرای منبع باز MicroProfile Config را پیاده‌سازی و پشتیبانی می‌کنند. در طول آموزش تعاملی، شما از Open Liberty استفاده خواهید کرد، زمان اجرای منبع باز انعطاف پذیر جاوا برای ساخت و اجرای برنامه‌ها و میکروسرویس‌های بومی ابر. با این حال، هر زمان اجرای سازگار با MicroProfile می‌تواند به جای آن استفاده شود.

## {{% heading "objectives" %}}

* ایجاد یک ConfigMap و Secret در Kubernetes
* تزریق پیکربندی میکروسرویس با استفاده از MicroProfile Config

<!-- lessoncontent -->

## مثال: خارجی سازی پیکربندی با استفاده از MicroProfile، ConfigMaps و Secrets

[شروع آموزش تعاملی](/docs/tutorials/configuration/configure-java-microservice/configure-java-microservice-interactive/)
