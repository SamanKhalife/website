---
title: "امنیت بومی ابری و Kubernetes"
linkTitle: "امنیت بومی ابری"
weight: 10

# فهرست بخش این موضوع را به‌طور مشخص فهرست می‌کند
hide_summary: true

description: >
  مفاهیم برای حفظ امنیت بارهای کاری بومی ابری شما.
---

Kubernetes بر اساس معماری بومی ابری طراحی شده است و از توصیه‌های
{{< glossary_tooltip text="CNCF" term_id="cncf" >}} درباره بهترین شیوه‌های
امنیت اطلاعات بومی ابری بهره می‌برد.

در این صفحه، یک مرور کلی از نحوه طراحی Kubernetes برای کمک به شما در
استقرار یک پلتفرم بومی ابری امن ارائه شده است.

## امنیت اطلاعات بومی ابری

{{< comment >}}
نسخه‌های محلی‌سازی شده این مقاله سفید موجود است؛ اگر می‌توانید در زمان محلی‌سازی به یکی از این نسخه‌ها لینک دهید، این کار حتی بهتر است.
{{< /comment >}}

مقاله سفید CNCF [مقاله سفید](https://github.com/cncf/tag-security/tree/main/security-whitepaper)
در مورد امنیت بومی ابری، کنترل‌ها و شیوه‌های امنیتی را که مناسب برای مراحل مختلف _چرخه عمر_ هستند، تعریف می‌کند.

## مرحله _توسعه_ چرخه عمر {#lifecycle-phase-develop}

- اطمینان از یکپارچگی محیط‌های توسعه.
- طراحی برنامه‌ها با پیروی از بهترین شیوه‌های امنیت اطلاعات، متناسب با زمینه شما.
- در نظر گرفتن امنیت کاربر نهایی به عنوان بخشی از طراحی راه‌حل.

برای دستیابی به این اهداف، می‌توانید:

1. معماری‌ای مانند [صفر اعتماد](https://glossary.cncf.io/zero-trust-architecture/) را بپذیرید که سطح حملات را حتی برای تهدیدات داخلی به حداقل می‌رساند.
1. فرآیند بازبینی کد را تعریف کنید که نگرانی‌های امنیتی را مدنظر قرار دهد.
1. یک _مدل تهدید_ از سیستم یا برنامه خود ایجاد کنید که مرزهای اعتماد را شناسایی کند. از این مدل برای شناسایی ریسک‌ها و یافتن راه‌هایی برای مقابله با این ریسک‌ها استفاده کنید.
1. امنیت خودکار پیشرفته‌ای مانند _فازینگ_ و [مهندسی آشوب امنیتی](https://glossary.cncf.io/security-chaos-engineering/) را در جایی که توجیه‌پذیر است، ادغام کنید.

## مرحله _توزیع_ چرخه عمر {#lifecycle-phase-distribute}

- اطمینان از امنیت زنجیره تامین برای تصاویر کانتینری که اجرا می‌کنید.
- اطمینان از امنیت زنجیره تامین برای کلاستر و سایر اجزایی که برنامه شما را اجرا می‌کنند. مثالی از یک جزء دیگر می‌تواند یک پایگاه داده خارجی باشد که برنامه بومی ابری شما برای پایداری از آن استفاده می‌کند.

برای دستیابی به این اهداف، می‌توانید:

1. تصاویر کانتینری و سایر مصنوعات را برای آسیب‌پذیری‌های شناخته شده اسکن کنید.
1. اطمینان حاصل کنید که توزیع نرم‌افزار از رمزگذاری در حین انتقال با زنجیره اعتماد برای منبع نرم‌افزار استفاده می‌کند.
1. فرآیندهایی را برای به‌روزرسانی وابستگی‌ها زمانی که به‌روزرسانی‌ها موجود هستند، به‌ویژه در پاسخ به اعلان‌های امنیتی، بپذیرید و دنبال کنید.
1. از مکانیسم‌های اعتبارسنجی مانند گواهینامه‌های دیجیتال برای اطمینان از زنجیره تامین استفاده کنید.
1. به فیدها و سایر مکانیسم‌ها برای اطلاع از ریسک‌های امنیتی اشتراک کنید.
1. دسترسی به مصنوعات را محدود کنید. تصاویر کانتینری را در یک [رجیستری خصوصی](/docs/concepts/containers/images/#using-a-private-registry) قرار دهید که فقط به مشتریان مجاز اجازه کشیدن تصاویر را می‌دهد.

## مرحله _استقرار_ چرخه عمر {#lifecycle-phase-deploy}

اطمینان حاصل کنید که محدودیت‌های مناسبی در مورد آنچه که می‌تواند مستقر شود، چه کسی می‌تواند آن را مستقر کند و کجا می‌تواند مستقر شود وجود دارد.
می‌توانید اقداماتی را از مرحله _توزیع_ اجرا کنید، مانند تأیید هویت رمزنگاری مصنوعات تصاویر کانتینری.

هنگامی که Kubernetes را مستقر می‌کنید، همچنین پایه‌ای برای محیط زمان اجرای برنامه‌های خود فراهم می‌کنید: یک کلاستر Kubernetes (یا چندین کلاستر).
زیرساخت IT باید تضمین‌های امنیتی را که لایه‌های بالاتر انتظار دارند، فراهم کند.

## مرحله _زمان اجرا_ چرخه عمر {#lifecycle-phase-runtime}

مرحله زمان اجرا شامل سه حوزه حیاتی است: [محاسبات](#protection-runtime-compute)، [دسترسی](#protection-runtime-access) و [ذخیره‌سازی](#protection-runtime-storage).

### حفاظت در زمان اجرا: دسترسی {#protection-runtime-access}

API Kubernetes چیزی است که کلاستر شما را کار می‌کند. حفاظت از این API کلید فراهم کردن امنیت مؤثر برای کلاستر است.

صفحات دیگر در مستندات Kubernetes جزئیات بیشتری در مورد نحوه تنظیم جنبه‌های خاص کنترل دسترسی ارائه می‌دهند. [چک لیست امنیت](/docs/concepts/security/security-checklist/) مجموعه‌ای از بررسی‌های پایه‌ای پیشنهادی برای کلاستر شما دارد.

علاوه بر این، امنیت کلاستر شما به معنای پیاده‌سازی احراز هویت و مجوز مؤثر برای دسترسی به API است. از [حساب‌های خدماتی](/docs/concepts/security/service-accounts/) برای ارائه و مدیریت هویت‌های امنیتی برای بارهای کاری و اجزای کلاستر استفاده کنید.

Kubernetes از TLS برای حفاظت از ترافیک API استفاده می‌کند؛ مطمئن شوید که کلاستر را با استفاده از TLS مستقر کرده‌اید (شامل ترافیک بین نودها و صفحه کنترل)، و کلیدهای رمزنگاری را حفاظت کنید. اگر از API خود Kubernetes برای [درخواست‌های امضای گواهینامه](/docs/reference/access-authn-authz/certificate-signing-requests/#certificate-signing-requests) استفاده می‌کنید، توجه ویژه‌ای به محدود کردن سوء استفاده در آنجا داشته باشید.
### حفاظت در زمان اجرا: محاسبات {#protection-runtime-compute}

{{< glossary_tooltip text="کانتینرها" term_id="container" >}} دو چیز ارائه می‌دهند: ایزولاسیون بین برنامه‌های مختلف و مکانیزمی برای ترکیب برنامه‌های ایزوله شده جهت اجرا روی یک کامپیوتر میزبان. این دو جنبه، ایزولاسیون و تجمیع، به این معناست که امنیت در زمان اجرا شامل تجارت‌آف‌ها و پیدا کردن تعادل مناسب است.

Kubernetes به یک {{< glossary_tooltip text="زمان اجرای کانتینر" term_id="container-runtime" >}} متکی است تا در واقع کانتینرها را تنظیم و اجرا کند. پروژه Kubernetes یک زمان اجرای کانتینر خاص را توصیه نمی‌کند و شما باید اطمینان حاصل کنید که زمان(های) اجرایی که انتخاب می‌کنید، نیازهای امنیت اطلاعات شما را برآورده می‌کنند.

برای حفاظت از محاسبات خود در زمان اجرا، می‌توانید:

1. استانداردهای امنیتی [Pod](/docs/concepts/security/pod-security-standards/) را برای برنامه‌ها اجرا کنید تا اطمینان حاصل شود که آنها فقط با دسترسی‌های لازم اجرا می‌شوند.
1. یک سیستم‌عامل تخصصی روی نودهای خود اجرا کنید که به طور خاص برای اجرای بارهای کاری کانتینری طراحی شده است. این معمولاً بر اساس یک سیستم‌عامل فقط خواندنی (_تصویر غیرقابل تغییر_) است که فقط خدمات ضروری برای اجرای کانتینرها را ارائه می‌دهد.

   سیستم‌عامل‌های خاص کانتینر به ایزوله کردن اجزای سیستم کمک می‌کنند و در صورت فرار کانتینر، سطح حمله را کاهش می‌دهند.
1. [ResourceQuotas](/docs/concepts/policy/resource-quotas/) را برای تخصیص منصفانه منابع مشترک تعریف کنید و از مکانیزم‌هایی مانند [LimitRanges](/docs/concepts/policy/limit-range/) استفاده کنید تا اطمینان حاصل شود که Pods نیازهای منابع خود را مشخص می‌کنند.
1. بارهای کاری را در نودهای مختلف تقسیم کنید.
   از مکانیزم‌های [ایزولاسیون نود](/docs/concepts/scheduling-eviction/assign-pod-node/#node-isolation-restriction) استفاده کنید، چه از Kubernetes خود یا از اکوسیستم، تا اطمینان حاصل شود که Pods با زمینه‌های اعتماد مختلف روی مجموعه‌های جداگانه از نودها اجرا می‌شوند.
1. از یک {{< glossary_tooltip text="زمان اجرای کانتینر" term_id="container-runtime" >}} استفاده کنید که محدودیت‌های امنیتی ارائه می‌دهد.
1. روی نودهای لینوکسی، از یک ماژول امنیتی لینوکس مانند [AppArmor](/docs/tutorials/security/apparmor/) یا [seccomp](/docs/tutorials/security/seccomp/) استفاده کنید.

### حفاظت در زمان اجرا: ذخیره‌سازی {#protection-runtime-storage}

برای حفاظت از ذخیره‌سازی کلاستر و برنامه‌هایی که در آن اجرا می‌شوند، می‌توانید:

1. کلاستر خود را با یک افزونه ذخیره‌سازی خارجی که رمزگذاری در حالت استراحت را برای ولوم‌ها فراهم می‌کند، ادغام کنید.
1. [رمزگذاری در حالت استراحت](/docs/tasks/administer-cluster/encrypt-data/) را برای اشیاء API فعال کنید.
1. دوام داده‌ها را با استفاده از پشتیبان‌گیری‌ها حفاظت کنید. اطمینان حاصل کنید که می‌توانید این پشتیبان‌ها را هر زمان که نیاز داشتید، بازیابی کنید.
1. اتصالات بین نودهای کلاستر و هر ذخیره‌سازی شبکه‌ای که به آن متکی هستند را احراز هویت کنید.
1. رمزگذاری داده‌ها را درون برنامه خود پیاده‌سازی کنید.

برای کلیدهای رمزگذاری، تولید آنها درون سخت‌افزارهای تخصصی بهترین حفاظت را در برابر خطرات افشا فراهم می‌کند. یک _ماژول امنیتی سخت‌افزاری_ می‌تواند به شما اجازه دهد عملیات‌های رمزنگاری را بدون اجازه کپی شدن کلید امنیتی در جای دیگر انجام دهید.

### شبکه و امنیت

همچنین باید اقدامات امنیت شبکه را مد نظر قرار دهید، مانند
[سیاست‌های شبکه](/docs/concepts/services-networking/network-policies/) یا یک
[شبکه خدمت](https://glossary.cncf.io/service-mesh/).
برخی افزونه‌های شبکه برای Kubernetes رمزگذاری شبکه کلاستر شما را با استفاده از فناوری‌هایی مانند
شبکه خصوصی مجازی (VPN) پوششی ارائه می‌دهند.
با طراحی، Kubernetes به شما اجازه می‌دهد افزونه شبکه خود را برای کلاستر خود استفاده کنید (اگر از Kubernetes مدیریت شده استفاده می‌کنید، فرد یا سازمانی که کلاستر شما را مدیریت می‌کند ممکن است افزونه شبکه‌ای برای شما انتخاب کرده باشد).

افزونه شبکه‌ای که انتخاب می‌کنید و نحوه ادغام آن می‌تواند تأثیر زیادی بر امنیت اطلاعات در حین انتقال داشته باشد.

### قابلیت مشاهده و امنیت در زمان اجرا

Kubernetes به شما اجازه می‌دهد کلاستر خود را با ابزارهای اضافی گسترش دهید. می‌توانید راه‌حل‌های شخص ثالث را تنظیم کنید تا به شما در نظارت یا رفع مشکل برنامه‌های شما و کلاسترهایی که در آن اجرا می‌شوند، کمک کنند. همچنین شما برخی ویژگی‌های پایه‌ای مشاهده‌پذیری را در خود Kubernetes دریافت می‌کنید. کدی که در کانتینرها اجرا می‌شود می‌تواند لاگ‌ها تولید کند، متریک‌ها منتشر کند یا داده‌های مشاهده‌پذیری دیگری فراهم کند؛ در زمان استقرار، باید اطمینان حاصل کنید که کلاستر شما سطح مناسبی از حفاظت را در آنجا فراهم می‌کند.

اگر یک داشبورد متریک یا چیزی مشابه تنظیم کردید، زنجیره اجزایی که داده را در آن داشبورد جمع‌آوری می‌کنند، همچنین خود داشبورد را بازبینی کنید. اطمینان حاصل کنید که کل زنجیره با کافی بودن مقاومت و حفاظت از تمامیت طراحی شده است تا بتوانید حتی در هنگام بروز حادثه‌ای که کلاستر شما ممکن است تخریب شود، به آن تکیه کنید.

در جایی که مناسب است، اقدامات امنیتی را در سطح پایین‌تر از خود Kubernetes مستقر کنید، مانند راه‌اندازی اندازه‌گیری شده رمزنگاری شده، یا توزیع تأیید شده زمان (که به اطمینان از وفاداری لاگ‌ها و سوابق بازرسی کمک می‌کند).

برای یک محیط با تضمین بالا، اقدامات رمزنگاری را برای اطمینان از اینکه لاگ‌ها هم دست‌نخورده و هم محرمانه هستند، مستقر کنید.

## {{% heading "whatsnext" %}}

### امنیت بومی ابری {#further-reading-cloud-native}

* مقاله سفید CNCF [مقاله سفید](https://github.com/cncf/tag-security/tree/main/security-whitepaper)
  در مورد امنیت بومی ابری.
* مقاله سفید CNCF [مقاله سفید](https://github.com/cncf/tag-security/blob/f80844baaea22a358f5b20dca52cd6f72a32b066/supply-chain-security/supply-chain-security-paper/CNCF_SSCP_v1.pdf)
  در مورد بهترین شیوه‌ها برای امن‌سازی زنجیره تأمین نرم‌افزار.
* [رفع مشکل کلاستر Kubernetes: درک امنیت از هسته به بالا](https://archive.fosdem.org/2020/schedule/event/kubernetes/) (FOSDEM 2020)
* [بهترین شیوه‌های امنیتی Kubernetes](https://www.youtube.com/watch?v=wqsUfvRyYpw) (Kubernetes Forum Seoul 2019)
* [به سوی بوت اندازه‌گیری شده از جعبه](https://www.youtube.com/watch?v=EzSkU3Oecuw) (Linux Security Summit 2016)

### Kubernetes و امنیت اطلاعات {#further-reading-k8s}

* [امنیت Kubernetes](/docs/concepts/security/)
* [امن‌سازی کلاستر خود](/docs/tasks/administer-cluster/securing-a-cluster/)
* [رمزگذاری داده‌ها در حین انتقال](/docs/tasks/tls/managing-tls-in-a-cluster/) برای صفحه کنترل
* [رمزگذاری داده‌ها در حالت استراحت](/docs/tasks/administer-cluster/encrypt-data/)
* [رازها در Kubernetes](/docs/concepts/configuration/secret/)
* [کنترل دسترسی به API Kubernetes](/docs/concepts/security/controlling-access)
* [سیاست‌های شبکه](/docs/concepts/services-networking/network-policies/) برای Pods
* [استانداردهای امنیتی Pod](/docs/concepts/security/pod-security-standards/)
* [کلاس‌های زمان اجرا](/docs/concepts/containers/runtime-class)
