---
reviewers:
- jayunit100
- jsturtevant
- marosset
- perithompson
title: مدیریت منابع برای گره‌های ویندوز
content_type: مفهوم
weight: 75
---

<!-- مرور -->

این صفحه تفاوت‌های مدیریت منابع بین سیستم‌های عامل لینوکس و ویندوز را شرح می‌دهد.

<!-- متن -->

در گره‌های لینوکس، {{< glossary_tooltip text="cgroups" term_id="cgroup" >}} به عنوان مرز پاد (Pod) برای کنترل منابع استفاده می‌شوند. کانتینرها داخل این مرز ایجاد می‌شوند و برای جداسازی شبکه، پردازش و فایل سیستم استفاده می‌شوند. API‌های cgroup لینوکس برای جمع‌آوری آمار استفاده از CPU، I/O و حافظه قابل استفاده هستند.

به عکس، در ویندوز برای هر کانتینر از یک [_شیء کار_](https://docs.microsoft.com/windows/win32/procthread/job-objects) با فیلتر فضای نام سیستم استفاده می‌شود که تمام فرآیندها را در یک کانتینر می‌گیرد و جداسازی منطقی از میزبان را فراهم می‌کند.
(شیء‌های کار یک مکانیسم جداسازی فرآیند ویندوز هستند و متفاوت از آن چیزی است که Kubernetes به عنوان یک {{< glossary_tooltip term_id="job" text="Job" >}} می‌شناسد).

در ویندوز، هیچ راهی برای اجرای یک کانتینر ویندوز بدون فیلتر فضای نام وجود ندارد. این به این معنی است که امتیازات سیستمی نمی‌توانند در سیاق میزبان تصریح شوند و بنابراین کانتینرهای امتیازی در ویندوز موجود نیستند.
کانتینرها نمی‌توانند هویتی را از میزبان به ارث ببرند زیرا مدیریت حساب کاربری امنیتی (SAM) جداگانه است.

## مدیریت حافظه {#resource-management-memory}

ویندوز از یک کشته کننده فرآیند خارج از حافظه مثل لینوکس استفاده نمی‌کند. ویندوز همیشه تمام تخصیص‌های حافظه حالت کاربری را به صورت مجازی در نظر می‌گیرد و پیج فایل‌ها اجباری هستند.

گره‌های ویندوز حافظه را برای فرآیندها اضافی تعهد نمی‌کنند. تاثیر نهایی این است که ویندوز به همان شرایط حافظه خارج از حالت کاری نمی‌رسد که لینوکس می‌رسد، و فرآیندها به جای خاتمه حافظه (OOM) به دیسک پیچیده می‌شوند. اگر حافظه اضافه‌ای اختصاص داده شده باشد و تمام حافظه فیزیکی انقراض شود، پیجینگ می‌تواند عملکرد را کند کند.

## مدیریت CPU {#resource-management-cpu}

ویندوز می‌تواند میزان زمان CPU اختصاص داده شده برای فرآیندهای مختلف را محدود کند اما نمی‌تواند یک حداقل مطمئن از زمان CPU تضمین کند.

در ویندوز، kubelet از یک پرچم خط فرمان برای تنظیم اولویت زمان برنامه‌های زمان برنامه ای پشتیبانی می‌کند: `--windows-priorityclass`. این پرچم به فرآیند kubelet اجازه می‌دهد تا بیشترین برش‌های زمان CPU را نسبت به دیگر فرآیندهای در حال اجرا بر روی میزبان ویندوز بگیرد.
اطلاعات بیشتر در مورد مقادیر مجاز و معنای آنها در دسترس است در [کلاس‌های اولویت ویندوز](https://docs.microsoft.com/en-us/windows/win32/procthread/scheduling-priorities#priority-class).
برای اطمینان از اینکه پاد‌های در حال اجرا از گرفتن چرخه‌های CPU kubelet خالی نمی‌شوند، این پرچم را به `ABOVE_NORMAL_PRIORITY_CLASS` یا بالاتر تنظیم کنید.

## رزرو منابع {#resource-reservation}

برای در نظر گرفتن حافظه و CPU استفاده شده توسط سیستم عامل، زمان اجرای کانتینر و توسط فرآیندهای میزبان Kubernetes مانند kubelet، می‌توانید (و باید) با پرچم‌های kubelet `--kube-reserved` و/یا `--system-reserved` منابع حافظه و CPU را رزرو کنید.
در ویندوز، این مقادیر فقط برای محاسبه منابع قابل تخصیص گره استفاده می‌شود.
{{< caution >}}
با اجرای بارهای کار، حدود حافظه و CPU منابع روی کانتینرها را تنظیم کنید.
این نیز از `NodeAllocatable` کم می‌کند و به برنامه‌ریز خوشه در تعیین اینکه کدام پادها باید بر روی کدام گره‌ها قرار گیرند کمک می‌کند.
اجرای پادها بدون حدود ممکن است منابع گره‌های ویندوز را بیش از حد فراهم کند و در موارد اقتصادی ممکن است باعث شود که گره‌ها ناپایدار شوند.
{{< /caution >}}

در ویندوز، یک شیوه خوب این است که حداقل ۲ گیگابایت حافظه را رزرو کنید.

برای تعیین اینکه چقدر CPU را رزرو کنید، چگونگی کثافت بیشینه پاد برای هر گره را مشخص کنید و مصرف CPU خدمات سیستمی اجرا شده را نظارت کنید، سپس یک مقدار را انتخاب کنید که نیاز‌های بار کاری شما را برآورده کند.
